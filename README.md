# 🛍️ customer

**customer** は、小規模店舗向け商品管理アプリ「[seller](https://seller-weld.vercel.app/)」と連携する、**お客様（顧客）専用の Web アプリケーション**です。

## 開発した背景
　このアプリは、私が雑貨店でアルバイトをしていた経験をもとに作成したものです。雑貨店でアルバイトをしている際、海外のお客様や国内のお客様から商品の詳細について聞かれることが多くあり、その度に在庫管理や発注の業務に支障をきたすことが多くありました。この課題を解決するために作ったアプリこそがお店用のアプリ(seller)とお客様用のアプリ(customer)です。
 機能としては、sellerで商品の在庫管理や商品の投稿・削除ができ、customerでは、お客様が商品情報の詳細を知るために、Reactのライブラリを用いて、商品詳細ページのQRコードを生成できます。この生成したQRコードをコピーまたは印刷し、商品それぞれのプライス(値札)に貼ることで、お客様が商品のQRコードを読み取った際に、customerのQRコードを読み取った商品詳細ページに飛び、商品の値段や商品用途について知れるという機能を有しています。また、お客様が商品にアクセスした際に、アクセスしたアプリ内で検索機能を付与しているので、探している商品がそもそも店舗で取り扱っているのかを知ることができます。



## Supabase ✖️ Next.js ✖️ React ✖️ TypeScriptを用いた４つの理由

1. **Supabase：バックエンドを“即戦力”にするため**
   - 自前でサーバー構築／運用をせずに、PostgreSQL〈RLS〉・認証・ストレージ・リアルタイム機能を即利用可。  
   - 認証・権限管理（RLS）  
   - 店員（seller）とお客様（customer）それぞれにログイン制御やデータアクセス制限を簡単に実装可能。  
   - リアルタイム更新  
   - 在庫数の変動を即座に他のクライアントに反映できるため、複数端末での同時編集にも強い。

2. **Next.js：UI と API を同じリポジトリでまとめるため**
   - **API Routes**  
     Supabase のサーバーサイド呼び出し（Webhook／セキュアなクエリ）を同一コードベースで書ける。  
   - **Incremental Static Regeneration（ISR）**  
     商品一覧ページを高速に配信しつつ、在庫更新があれば数分単位で再生成。  
   - **Vercel 連携**  
     デプロイがワンクリック、プレビュー環境も自動で立ち上がり、アルバイト期間中の素早い検証に最適。

3. **React：コンポーネント分割で機能拡張・再利用を効率的にするため**
   - **コンポーネント駆動開発**  
     「商品カード」「QRコードモーダル」「検索バー」などを分離し、seller／customer 双方で再利用可能。  
   - **豊富なライブラリ**  
     QRコード生成（`react-qr-code` など）、フォーム管理（`react-hook-form`）もすぐ導入できる。  
   - **仮想 DOM の高速描画**  
     大量の商品一覧や検索結果のフィルタリングもスムーズに更新。

4. **TypeScript：開発品質と保守性を高めるため**
   - **静的型付けによるバグ予防**  
     「在庫数は `number`」「商品詳細は `interface` で定義」と型で担保し、実装ミスを減らす。  
   - **エディタ補完の充実**  
     型情報のおかげで IDE が補完・リファクタリングを強力サポート。


## 🔍 概要

QR コードを通じて顧客がスマートフォンから直接商品詳細を確認し、そのままオンラインで閲覧・購入できるシンプルな UI 設計が特徴です。

店舗側が `seller` で管理した商品情報を Supabase 経由で取得し、リアルタイムに表示します。

## ✨ 主な機能

- 📱 QR コードから商品ページに直接アクセス
- 🛒 商品一覧・詳細ページの閲覧
- 🌐 英語翻訳（DeepL API 連携・最新版でセキュリティ強化済み）
- 💳 Stripe による決済（クレジットカード対応）
- 🔐 顧客ログイン（ロールベースで制御）
- 👍 いいね機能の実装(お気に入りの商品のいいねが可能)
- 😎 マイページでのいいねした商品の表示機能

## 🧩 技術スタック

| 分類            | 技術                         |
| --------------- | ---------------------------- |
| フロントエンド  | Next.js, React, TypeScript   |
| バックエンド 　 | Supabase (DB, Auth, Storage) |
| 決済            | Stripe                       |
| 翻訳            | DeepL API                    |

## � セキュリティ対策

- ✅ **脆弱性スキャン**: `npm audit` による定期的なセキュリティチェック（現在：脆弱性0件）
- 🛡️ **依存関係の管理**: ESLint、form-data等の脆弱性を最新版へのアップデートで解決
- 🔐 **認証・認可**: Supabase Row Level Security（RLS）による厳格なアクセス制御
- 🌐 **API セキュリティ**: DeepL API連携時の適切なキー管理とレート制限対応

## �🔗 seller との連携

- Supabase の共通テーブル（例: `shopUsers`, `shopposts`）を使用
- ログインユーザーの `role` が `customer` の場合に本アプリへアクセス可能
- Row Level Security（RLS）によりデータの読み書きを制限

### Vercelのリンク
Vercel:[customer](https://customer-gamma-one.vercel.app/)
